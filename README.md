# Mondis

**Mondis** — это утилита на Rust для управления параметрами мониторов в Linux. На данном этапе реализована панель для регулировки яркости экрана.

## Реализованные возможности

- **Регулировка яркости**:
  - **Программная**: Изменение яркости экрана средствами операционной системы.
  - **Аппаратная (DDC/CI)**: Прямое управление яркостью мониторов, которые поддерживают протокол DDC/CI.

## Планируемые возможности

- Управление расположением мониторов (XRandR / Wayland).
- Точная настройка DPI.
- Управление контрастностью и цветовой температурой.
- Интеграция в системный трей для быстрого доступа.

## Структура проекта

Проект представляет собой Rust-воркспейс и разделен на несколько крейтов (пакетов):

- `mondis-core`: Ядро проекта, содержит основную логику и общие структуры данных.
- `mondis-ddc`: Модуль для взаимодействия с мониторами по протоколу DDC/CI.
- `mondis-x11`: Модуль для интеграции с X11/XRandR.
- `mondis-panel-direct`: Основное приложение с графическим интерфейсом.

## Установка (просто)

Рекомендуемый путь — встроенный инсталлер. Он:
- установит системные зависимости (через sudo для популярных дистрибутивов),
- поставит/обновит Rust, соберёт проект в release,
- установит бинарники в `~/.local/bin`,
- создаст автозапуск и ярлык в меню приложений,
- добавит helper-скрипт для ручного запуска трея.

1) Клонируйте репозиторий:
```bash
git clone https://github.com/siv237/mondis.git
cd mondis
```

2) Запустите инсталлер:
```bash
bash scripts/install.sh
```

По завершении:
- трей стартует автоматически (если не был запущен),
- в меню приложений появится «Mondis Tray»,
- вручную запустить трей можно так:
```bash
~/.local/bin/mondis-tray-start
```

Подсказки:
- Если случайно закрыли трей («Выход») — используйте `mondis-tray-start` или ярлык в меню.
- Панель можно открыть из меню трея («Open Mondis») или запустить напрямую: `~/.local/bin/mondis-panel-direct`.

Удаление:
```bash
bash scripts/uninstall.sh
```

Если `~/.local/bin` не в PATH, добавьте:
```bash
echo 'export PATH="$HOME/.local/bin:$PATH"' >> ~/.profile
```

## Сборка из исходников (альтернативно)

Если нужен ручной путь без инсталлера:
```bash
# Установите Rust (если нет)
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
export PATH="$HOME/.cargo/bin:$PATH"

# Сборка
cargo build --release -p mondis-tray -p mondis-panel-direct

# Установка бинарников
install -m 0755 target/release/mondis-tray ~/.local/bin/
install -m 0755 target/release/mondis-panel-direct ~/.local/bin/ || true
```

Ярлык/автозапуск и helper в этом случае не создаются автоматически — используйте инсталлер или настройте вручную.

## Лицензия

Этот проект распространяется под лицензией [MIT](./LICENSE).

## Примечания по окружению (X11 / Wayland)

- Программная регулировка яркости через `xrandr` работает в X11-сессии.
- В Wayland-сессиях `xrandr` недоступен; понадобится альтернативная интеграция
  (например, протоколы порталов/композитора). В текущей версии под Wayland
  доступны только аппаратные методы через DDC/CI (если есть доступ к I2C).
